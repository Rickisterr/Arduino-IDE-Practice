#include "SimpleKalmanFilter.h"

double Altitude[] = {0.0, -0.01, 0.48, 2.17, 4.35, 6.92, 8.93, 10.93, 12.96, 15.4, 17.84, 19.44, 22.02, 23.81, 26.05, 28.09, 30.46, 32.43, 34.87, 36.86, 37.89, 37.55, 37.98, 38.51, 38.36, 38.25, 38.34, 38.64, 38.48, 38.13, 38.09, 37.83, 37.97, 37.73, 36.71, 33.93, 31.49, 28.71, 26.97, 24.24, 21.94, 19.43, 16.96, 15.0, 12.12, 9.94, 7.4, 5.16, 3.03, 1.19, 0.43, 0.16, -0.05, 0.07, 0.91, 1.06, 0.89};
double AccelerationX[] = {0.0, 0.0, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.5, -0.27, -0.27, -0.7, -0.5, -0.5, -0.35, -0.35, -0.35, -0.43, -0.43, -0.39, -0.39, -0.39, -0.39, -0.08, -0.08, -0.08, 0.11, 0.11, -0.24, 0.07, 0.07, -0.85, -0.85, -3.19, -3.19, -3.19, -3.19, -3.19, -3.19, -3.19, -3.19, -3.19, -3.19, -3.19, -2.23, -2.23, -1.04, -1.12, -1.12, -2.15, 0.18, 0.03, -0.04, -0.01, 0.07};

double AccelerationY[] = {0.0, 0.0, -0.7, -0.7, -0.7, -0.7, -0.7, -0.7, -0.7, -0.7, -0.7, 0.49, 0.49, 0.22, 0.18, 0.33, 0.03, 0.03, -0.09, -0.24, -0.13, -0.09, -0.09, -0.24, -0.24, -0.13, -0.13, -0.13, 0.03, 0.03, -0.82, 0.03, 0.03, -0.05, -0.05, -7.98, -7.98, -7.98, -7.98, -7.98, -7.98, -7.98, -7.98, -7.98, -7.98, -7.98, 1.64, 1.64, -9.17, -9.09, -9.51, -4.76, -0.09, -0.66, -0.62, -0.62, -0.66};

double AccelerationZ[] = {0.0, 0.0, 9.86, 9.86, 9.86, 9.86, 9.86, 9.86, 9.86, 9.86, 9.86, 9.78, 9.78, 9.74, 9.9, 9.52, 9.71, 9.71, 9.86, 9.94, 9.44, 9.05, 9.05, 9.86, 9.86, 9.74, 9.74, 9.74, 9.67, 9.67, 9.71, 9.32, 9.32, 9.63, 9.63, 2.58, 2.58, 2.58, 2.58, 2.58, 2.58, 2.58, 2.58, 2.58, 2.58, 2.58, 9.59, 9.59, 2.81, 2.93, 2.81, 9.36, 9.74, 9.63, 9.78, 9.63, 9.82};

SimpleKalmanFilter simpleKalmanFilter(1, 1, 0.01);
int i = 0;

void DataOut(double inp[]) {
  float measuredval = inp[i];
  float estimatedval = simpleKalmanFilter.updateEstimate(measuredval);
  Serial.print(measuredval);
  Serial.print(", ");
  Serial.println(estimatedval);
  i += 1;
  delay(10);
}

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
}

void loop() {
  // put your main code here, to run repeatedly:
  DataOut(Altitude);
}
